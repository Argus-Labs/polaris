# SPDX-License-Identifier: BUSL-1.1
#
# Copyright (C) 2023, Berachain Foundation. All rights reserved.
# Use of this software is govered by the Business Source License included
# in the LICENSE file of this repository and at www.mariadb.com/bsl11.
#
# ANY USE OF THE LICENSED WORK IN VIOLATION OF THIS LICENSE WILL AUTOMATICALLY
# TERMINATE YOUR RIGHTS UNDER THIS LICENSE FOR THE CURRENT AND ALL OTHER
# VERSIONS OF THE LICENSED WORK.
#
# THIS LICENSE DOES NOT GRANT YOU ANY RIGHT IN ANY TRADEMARK OR LOGO OF
# LICENSOR OR ITS AFFILIATES (PROVIDED THAT YOU MAY USE A TRADEMARK OR LOGO OF
# LICENSOR AS EXPRESSLY REQUIRED BY THIS LICENSE).
#
# TO THE EXTENT PERMITTED BY APPLICABLE LAW, THE LICENSED WORK IS PROVIDED ON
# AN “AS IS” BASIS. LICENSOR HEREBY DISCLAIMS ALL WARRANTIES AND CONDITIONS,
# EXPRESS OR IMPLIED, INCLUDING (WITHOUT LIMITATION) WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, AND
# TITLE.

apk add bash jq

KEY1="seed0"
CHAINID="brickchain-666"
MONIKER1="seed-0"
KEYRING="test"
KEYALGO="eth_secp256k1"
LOGLEVEL="info"
HOMEDIR="/root/.polard"
TRACE=""
GENESIS=$HOMEDIR/config/genesis.json
TMP_GENESIS=$HOMEDIR/config/tmp_genesis.json


polard init $MONIKER1 -o --chain-id $CHAINID --home "$HOMEDIR"

jq '.app_state["staking"]["params"]["bond_denom"]="abera"' "$GENESIS" >"$TMP_GENESIS" && mv "$TMP_GENESIS" "$GENESIS";
jq '.app_state["crisis"]["constant_fee"]["denom"]="abera"' "$GENESIS" >"$TMP_GENESIS" && mv "$TMP_GENESIS" "$GENESIS";
jq '.app_state["gov"]["deposit_params"]["min_deposit"][0]["denom"]="abera"' "$GENESIS" >"$TMP_GENESIS" && mv "$TMP_GENESIS" "$GENESIS";
jq '.app_state["evm"]["params"]["evm_denom"]="abera"' "$GENESIS" >"$TMP_GENESIS" && mv "$TMP_GENESIS" "$GENESIS";
jq '.app_state["mint"]["params"]["mint_denom"]="abera"' "$GENESIS" >"$TMP_GENESIS" && mv "$TMP_GENESIS" "$GENESIS";
jq '.consensus["params"]["block"]["max_gas"]="30000000"' "$GENESIS" >"$TMP_GENESIS" && mv "$TMP_GENESIS" "$GENESIS";
jq --arg code "0x6080604052600436106100e0575f3560e01c806370a082311161007e578063a9059cbb11610058578063a9059cbb146102dd578063d0e30db014610319578063d505accf14610323578063dd62ed3e1461034b576100ef565b806370a082311461023b5780637ecebe001461027757806395d89b41146102b3576100ef565b806323b872dd116100ba57806323b872dd146101835780632e1a7d4d146101bf578063313ce567146101e75780633644e51514610211576100ef565b806306fdde03146100f3578063095ea7b31461011d57806318160ddd14610159576100ef565b366100ef576100ed610387565b005b5f80fd5b3480156100fe575f80fd5b506101076103e1565b60405161011491906110b3565b60405180910390f35b348015610128575f80fd5b50610143600480360381019061013e9190611164565b61046c565b60405161015091906111bc565b60405180910390f35b348015610164575f80fd5b5061016d610559565b60405161017a91906111e4565b60405180910390f35b34801561018e575f80fd5b506101a960048036038101906101a491906111fd565b61055f565b6040516101b691906111bc565b60405180910390f35b3480156101ca575f80fd5b506101e560048036038101906101e0919061124d565b61079a565b005b3480156101f2575f80fd5b506101fb6108b9565b6040516102089190611293565b60405180910390f35b34801561021c575f80fd5b506102256108dd565b60405161023291906112c4565b60405180910390f35b348015610246575f80fd5b50610261600480360381019061025c91906112dd565b610939565b60405161026e91906111e4565b60405180910390f35b348015610282575f80fd5b5061029d600480360381019061029891906112dd565b61094e565b6040516102aa91906111e4565b60405180910390f35b3480156102be575f80fd5b506102c7610963565b6040516102d491906110b3565b60405180910390f35b3480156102e8575f80fd5b5061030360048036038101906102fe9190611164565b6109ef565b60405161031091906111bc565b60405180910390f35b610321610387565b005b34801561032e575f80fd5b506103496004803603810190610344919061135c565b610afc565b005b348015610356575f80fd5b50610371600480360381019061036c91906113f9565b610de9565b60405161037e91906111e4565b60405180910390f35b6103913334610e09565b3373ffffffffffffffffffffffffffffffffffffffff167fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c346040516103d791906111e4565b60405180910390a2565b5f80546103ed90611464565b80601f016020809104026020016040519081016040528092919081815260200182805461041990611464565b80156104645780601f1061043b57610100808354040283529160200191610464565b820191905f5260205f20905b81548152906001019060200180831161044757829003601f168201915b505050505081565b5f8160045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9258460405161054791906111e4565b60405180910390a36001905092915050565b60025481565b5f8060045f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff811461068c57828161060f91906114c1565b60045f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505b8260035f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546106d891906114c1565b925050819055508260035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055508373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8560405161078691906111e4565b60405180910390a360019150509392505050565b8060035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054101561081a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108119061153e565b60405180910390fd5b6108243382610ed4565b3373ffffffffffffffffffffffffffffffffffffffff166108fc8290811502906040515f60405180830381858888f19350505050158015610867573d5f803e3d5ffd5b503373ffffffffffffffffffffffffffffffffffffffff167f7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65826040516108ae91906111e4565b60405180910390a250565b7f000000000000000000000000000000000000000000000000000000000000001281565b5f7f000000000000000000000000000000000000000000000000000000000000080d46146109125761090d610f9f565b610934565b7f46942f105ca720944e02a78cdc48eeb2545cb4da1c753bfb07bc7583e6d719f65b905090565b6003602052805f5260405f205f915090505481565b6005602052805f5260405f205f915090505481565b6001805461097090611464565b80601f016020809104026020016040519081016040528092919081815260200182805461099c90611464565b80156109e75780601f106109be576101008083540402835291602001916109e7565b820191905f5260205f20905b8154815290600101906020018083116109ca57829003601f168201915b505050505081565b5f8160035f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f828254610a3c91906114c1565b925050819055508160035f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610aea91906111e4565b60405180910390a36001905092915050565b42841015610b3f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b36906115a6565b60405180910390fd5b5f6001610b4a6108dd565b7f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98a8a8a60055f8f73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f815480929190600101919050558b604051602001610bcf969594939291906115d3565b60405160208183030381529060405280519060200120604051602001610bf69291906116a6565b604051602081830303815290604052805190602001208585856040515f8152602001604052604051610c2b94939291906116dc565b6020604051602081039080840390855afa158015610c4b573d5f803e3d5ffd5b5050506020604051035190505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614158015610cbe57508773ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16145b610cfd576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cf490611769565b60405180910390fd5b8560045f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550508573ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92587604051610dd891906111e4565b60405180910390a350505050505050565b6004602052815f5260405f20602052805f5260405f205f91509150505481565b8060025f828254610e1a9190611787565b925050819055508060035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055508173ffffffffffffffffffffffffffffffffffffffff165f73ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610ec891906111e4565b60405180910390a35050565b8060035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f828254610f2091906114c1565b925050819055508060025f82825403925050819055505f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610f9391906111e4565b60405180910390a35050565b5f7f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f5f604051610fcf9190611856565b60405180910390207fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc6463060405160200161100e95949392919061186c565b60405160208183030381529060405280519060200120905090565b5f81519050919050565b5f82825260208201905092915050565b5f5b83811015611060578082015181840152602081019050611045565b5f8484015250505050565b5f601f19601f8301169050919050565b5f61108582611029565b61108f8185611033565b935061109f818560208601611043565b6110a88161106b565b840191505092915050565b5f6020820190508181035f8301526110cb818461107b565b905092915050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f611100826110d7565b9050919050565b611110816110f6565b811461111a575f80fd5b50565b5f8135905061112b81611107565b92915050565b5f819050919050565b61114381611131565b811461114d575f80fd5b50565b5f8135905061115e8161113a565b92915050565b5f806040838503121561117a576111796110d3565b5b5f6111878582860161111d565b925050602061119885828601611150565b9150509250929050565b5f8115159050919050565b6111b6816111a2565b82525050565b5f6020820190506111cf5f8301846111ad565b92915050565b6111de81611131565b82525050565b5f6020820190506111f75f8301846111d5565b92915050565b5f805f60608486031215611214576112136110d3565b5b5f6112218682870161111d565b93505060206112328682870161111d565b925050604061124386828701611150565b9150509250925092565b5f60208284031215611262576112616110d3565b5b5f61126f84828501611150565b91505092915050565b5f60ff82169050919050565b61128d81611278565b82525050565b5f6020820190506112a65f830184611284565b92915050565b5f819050919050565b6112be816112ac565b82525050565b5f6020820190506112d75f8301846112b5565b92915050565b5f602082840312156112f2576112f16110d3565b5b5f6112ff8482850161111d565b91505092915050565b61131181611278565b811461131b575f80fd5b50565b5f8135905061132c81611308565b92915050565b61133b816112ac565b8114611345575f80fd5b50565b5f8135905061135681611332565b92915050565b5f805f805f805f60e0888a031215611377576113766110d3565b5b5f6113848a828b0161111d565b97505060206113958a828b0161111d565b96505060406113a68a828b01611150565b95505060606113b78a828b01611150565b94505060806113c88a828b0161131e565b93505060a06113d98a828b01611348565b92505060c06113ea8a828b01611348565b91505092959891949750929550565b5f806040838503121561140f5761140e6110d3565b5b5f61141c8582860161111d565b925050602061142d8582860161111d565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061147b57607f821691505b60208210810361148e5761148d611437565b5b50919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6114cb82611131565b91506114d683611131565b92508282039050818111156114ee576114ed611494565b5b92915050565b7f496e73756666696369656e742062616c616e63650000000000000000000000005f82015250565b5f611528601483611033565b9150611533826114f4565b602082019050919050565b5f6020820190508181035f8301526115558161151c565b9050919050565b7f5045524d49545f444541444c494e455f455850495245440000000000000000005f82015250565b5f611590601783611033565b915061159b8261155c565b602082019050919050565b5f6020820190508181035f8301526115bd81611584565b9050919050565b6115cd816110f6565b82525050565b5f60c0820190506115e65f8301896112b5565b6115f360208301886115c4565b61160060408301876115c4565b61160d60608301866111d5565b61161a60808301856111d5565b61162760a08301846111d5565b979650505050505050565b5f81905092915050565b7f19010000000000000000000000000000000000000000000000000000000000005f82015250565b5f611670600283611632565b915061167b8261163c565b600282019050919050565b5f819050919050565b6116a061169b826112ac565b611686565b82525050565b5f6116b082611664565b91506116bc828561168f565b6020820191506116cc828461168f565b6020820191508190509392505050565b5f6080820190506116ef5f8301876112b5565b6116fc6020830186611284565b61170960408301856112b5565b61171660608301846112b5565b95945050505050565b7f494e56414c49445f5349474e45520000000000000000000000000000000000005f82015250565b5f611753600e83611033565b915061175e8261171f565b602082019050919050565b5f6020820190508181035f83015261178081611747565b9050919050565b5f61179182611131565b915061179c83611131565b92508282019050808211156117b4576117b3611494565b5b92915050565b5f81905092915050565b5f819050815f5260205f209050919050565b5f81546117e281611464565b6117ec81866117ba565b9450600182165f8114611806576001811461181b5761184d565b60ff198316865281151582028601935061184d565b611824856117c4565b5f5b8381101561184557815481890152600182019150602081019050611826565b838801955050505b50505092915050565b5f61186182846117d6565b915081905092915050565b5f60a08201905061187f5f8301886112b5565b61188c60208301876112b5565b61189960408301866112b5565b6118a660608301856111d5565b6118b360808301846115c4565b969550505050505056fea2646970667358221220590030a1f440c47e7da116a6cba6fb05bb10f826d3328ca3d9021b48ed58a2a164736f6c63430008140033" '.app_state.evm.alloc."5806E416dA447b267cEA759358cF22Cc41FAE80F" = {"balance": "0x0", "code": $code, "nonce": "0x1"}' "$GENESIS" > "$TMP_GENESIS" && mv "$TMP_GENESIS" "$GENESIS"

polard config set client keyring-backend $KEYRING --home "$HOMEDIR"

polard keys add $KEY1 --keyring-backend $KEYRING --algo $KEYALGO --home "$HOMEDIR"

polard genesis add-genesis-account $KEY1 100000000000000000000000000abera --keyring-backend $KEYRING --home "$HOMEDIR"

polard genesis gentx $KEY1 1000000000000000000000abera --keyring-backend $KEYRING --chain-id $CHAINID --home "$HOMEDIR"
